<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Automated Displacement Statictics Analysis • unhcrreports</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Lato-0.4.10/font.css" rel="stylesheet">
<link href="deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Automated Displacement Statictics Analysis">
<meta name="description" content="Generates automated humanitarian reports using UNHCR data, ggplot2, and AI narratives.">
<meta property="og:description" content="Generates automated humanitarian reports using UNHCR data, ggplot2, and AI narratives.">
<meta property="og:image" content="https://matheus-hardt.github.io/unhcrreports/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">unhcrreports</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get Started</h6></li>
    <li><a class="dropdown-item" href="articles/get-started.html">Get Started</a></li>
    <li><a class="dropdown-item" href="articles/ai-powered-reports.html">AI Powered Reports</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="articles/index.html">More articles...</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/matheus-hardt/unhcrreports/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="unhcrreports-ai-powered-humanitarian-reporting-">{unhcrreports}: AI-Powered Humanitarian Reporting <a class="anchor" aria-label="anchor" href="#unhcrreports-ai-powered-humanitarian-reporting-"></a>
</h1>
</div>
<blockquote>
<p><strong>Reporting Engine</strong>: This package functions as the “Reporting Engine” for UNHCR statistics. It focuses on <strong>orchestrating automated reports</strong> by combining data, visualization, and AI narratives.</p>
<p><strong>Data Source</strong>: Fetching the latest official statistics via the <a href="https://populationstatistics.github.io/refugees/" class="external-link"><code>{refugees}</code></a> package.</p>
<p><strong>Graphics Source</strong>: The standardized charts and maps used in these reports are built upon the <a href="https://edouard-legoupil.github.io/unhcrviz/" class="external-link"><code>{unhcrviz}</code></a> package, which provides a high-level chart library API over <a href="https://unhcr-dataviz.github.io/unhcrthemes/index.html" class="external-link"><code>{unhcrthemes}</code></a>.</p>
</blockquote>
<p><a href="https://matheus-hardt.github.io/unhcrreports/"><code>{unhcrreports}</code></a> automates the production of <a href="https://matheus-hardt.github.io/unhcrreports/articles/ai-powered-reports.html">analytical reports</a> (Country and Regional) by:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Visualizing Trends</strong>: Generating standardized plots.</p></li>
<li><p><strong>Generating Narratives</strong>: Using Large Language Models (LLMs) to interpret data and write context-aware insights.</p></li>
<li><p><strong>Publishing</strong>: Compiling everything into polished Quarto reports.</p></li>
</ol>
<div class="section level2">
<h2 id="rationale">Rationale<a class="anchor" aria-label="anchor" href="#rationale"></a>
</h2>
<p>While anyone can already ask a large language model to call the UNHCR API and assemble an ad‑hoc analysis, that approach remains fundamentally limited: every chat interaction produces a different framing, different emphases, and different analytical pathways. By contrast, using AI to generate narrative on top of a standardized set of charts and indicators introduces a level of methodological consistency that simple chat-based prompting cannot achieve. This framework ensures that every operation is analyzed through the same <strong>structured lens</strong>, enabling comparability across countries, time periods, and thematic areas. Instead of reinventing the analysis each time, the AI is anchored in a stable analytical model—reducing variance, improving coherence, and guaranteeing that key questions are always addressed.</p>
<p>Just as importantly, this method produces narrative drafts that are <strong>“human‑in‑the‑loop ready”</strong>: analysts can immediately focus on refinement, nuance, and validation rather than on assembling first‑pass descriptive text. The result is a workflow where AI accelerates the routine narrative generation, while human experts retain control over interpretation, context, and judgment.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>This package is built with the help of <a href="https://thinkr-open.github.io/fusen/" class="external-link">{fusen}</a>. You can install it from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"matheus-hardt/unhcrreports"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install from local source</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>You can also use individual functions to generate analysis. For example, to analyse the <strong>Population Type per Year</strong> for <strong>Ukraine</strong> in 2024:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://matheus-hardt.github.io/unhcrreports">unhcrreports</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://edouard-legoupil.github.io/unhcrviz/docs/" class="external-link">unhcrviz</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Generate the plot</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">unhcrviz</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/unhcrviz/man/plot_ctr_population_type_per_year.html" class="external-link">plot_ctr_population_type_per_year</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2024</span>,</span>
<span>  country_asylum_iso3c <span class="op">=</span> <span class="st">"UKR"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Generate the story (using Gemini as an example)</span></span>
<span><span class="va">story</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_plot_story.html">generate_plot_story</a></span><span class="op">(</span><span class="va">p</span>, </span>
<span>  provider <span class="op">=</span> <span class="st">"gemini"</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"gemini-3-pro-preview"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Pull the long text</span></span>
<span><span class="va">story</span><span class="op">$</span><span class="va">long_text</span></span></code></pre></div>
<p><img src="reference/figures/usage_pop_trend.svg" width="100%"></p>
<blockquote>
<p><strong>AI Narrative</strong>: The displacement landscape in Ukraine for 2024 continues to be dominated by the internal displacement crisis. Internally Displaced Persons (IDPs) represented the overwhelming majority of the affected population, maintaining the plateau reached after the sharp escalation in 2022. While the number of Asylum Seekers and Returnees remains statistically visible, they represent a minor fraction of the total displacement figures, emphasizing that the primary humanitarian challenge remains within the country’s borders.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>Generate a full report with a single command:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://matheus-hardt.github.io/unhcrreports">unhcrreports</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a Country Report (e.g., Brazil)</span></span>
<span><span class="fu"><a href="reference/generate_report.html">generate_report</a></span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="st">"country"</span>, </span>
<span>  name <span class="op">=</span> <span class="st">"BRA"</span>, </span>
<span>  year <span class="op">=</span> <span class="fl">2024</span>,</span>
<span>  gp_provider <span class="op">=</span> <span class="st">"gemini"</span>, <span class="co"># or "openai", "ollama", "azure"</span></span>
<span>  gp_model <span class="op">=</span> <span class="st">"gemini-3-pro-preview"</span>,</span>
<span>  include_ai <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># Set to FALSE to skip AI generation</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ai-configuration">AI Configuration<a class="anchor" aria-label="anchor" href="#ai-configuration"></a>
</h2>
<p>To enable AI-generated narratives, you need to set up an API key for a supported LLM provider.</p>
<div class="section level3">
<h3 id="environment-setup">Environment Setup<a class="anchor" aria-label="anchor" href="#environment-setup"></a>
</h3>
<p>Set your API key as an environment variable in your <code>.Renviron</code> file or session:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For Google Gemini</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GEMINI_API_KEY <span class="op">=</span> <span class="st">"your_api_key_here"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For OpenAI</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>OPENAI_API_KEY <span class="op">=</span> <span class="st">"your_api_key_here"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For Anthropic</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>ANTHROPIC_API_KEY <span class="op">=</span> <span class="st">"your_api_key_here"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For Azure OpenAI</span></span>
<span><span class="co"># Sys.setenv(AZURE_OPENAI_ENDPOINT = "...")</span></span>
<span><span class="co"># Sys.setenv(AZURE_OPENAI_API_KEY = "...")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="local-llm-ollama">Local LLM (Ollama)<a class="anchor" aria-label="anchor" href="#local-llm-ollama"></a>
</h3>
<p>If you prefer to run a local model using Ollama:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Install Ollama</strong>: Download from <a href="https://ollama.com" class="external-link">ollama.com</a>.</li>
<li>
<strong>Pull a Model</strong>: <code>bash     ollama pull qwen2.5:32b</code>
</li>
<li>
<strong>Run Report</strong>: Passing <code>gp_provider = "ollama"</code> and <code>gp_model = "qwen2.5:32b"</code>.</li>
</ol>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/matheus-hardt/unhcrreports/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/matheus-hardt/unhcrreports/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing unhcrreports</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matheus Hardt <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matheus Hardt.</p>
</div>

<div class="pkgdown-footer-right">
  <p><a href="https://www.unhcr.org/" target="_blank" rel="noopener noreferrer" class="external-link"><img src="https://raw.githubusercontent.com/unhcr-dataviz/unhcrtemplate/master/man/figures/logo.svg" alt="UNHCR logo" style="max-height:2.5rem"></a></p>
</div>

    </footer>
</div>





  </body>
</html>
